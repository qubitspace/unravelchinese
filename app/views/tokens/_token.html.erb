
<% status = (@word_statuses.has_key?(token.word_id) ? @word_statuses[token.word_id].status : 'unknown') %>
<% show_pinyin = ['unknown'].include? status %>
<% show_mark_unknown = ['known'].include? status %>
<% show_mark_known = ['unknown'].include? status %>
<div class='token <%= token.word.category %> <%= status %>' wordid="<%= token.word.id %>">

  <span class='word_value learnable'>
    <%= token.word.simplified %><br/>
  </span>

  <span class='word_pinyin learnable'>
    <%= token.word.pinyin %>
  </span>

  <span class='token_notes'>
    <%= token.notes %>
  </span>

  <div class="tooltip <%= token.word.category %> <%= status %>" wordId="<%= token.word.id %>">

    <div class='word_value'>
      <%= link_to token.word.simplified, word_path(token.word) %>
    </div>

    <div class='word_pinyin'>
      <%= token.word.pinyin %>
    </div>

    <hr>

    <div class="definitions">
      <strong>
      <% token.word.definitions.each do |definition| %>
        â€¢ <%= definition.value %><br/>
      <% end %>
      </strong>
    </div>

    <% if token.word.definitions.any? %><hr><% end %>

    <span class='mark_word_unknown'>
      <%= link_to "Mark as Unknown", admin_update_learned_word_status_path(word_id: token.word.id, status: :unknown), remote: true %>
    </span>
    <span class='mark_word_known'>
      <%= link_to "Mark as Known", admin_update_learned_word_status_path(word_id: token.word.id, status: :known), remote: true %>
    </span>

  </div>
</div>